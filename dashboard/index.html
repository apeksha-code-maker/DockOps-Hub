<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>DockOps Hub</title>

<style>
body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: #020617;
    color: #e5e7eb;
}

header {
    background: linear-gradient(90deg, #0ea5e9, #22c55e, #facc15);
    padding: 20px;
    text-align: center;
    font-size: 28px;
    font-weight: bold;
    color: #020617;
}

.controls {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
}

button {
    padding: 10px 18px;
    font-size: 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-weight: bold;
}

.start { background: #22c55e; }
.stop { background: #ef4444; }
.refresh { background: #38bdf8; }

.status {
    text-align: center;
    margin-top: 15px;
    font-size: 16px;
}

.dashboard {
    display: flex;
    justify-content: center;
    gap: 30px;
    margin-top: 40px;
}

.card {
    background: #020617;
    width: 230px;
    padding: 25px;
    border-radius: 18px;
    box-shadow: 0 0 30px rgba(56,189,248,0.4);
    text-align: center;
    border: 1px solid #1e293b;
}

.value {
    font-size: 42px;
    font-weight: bold;
}

.cpu { color: #38bdf8; }
.memory { color: #4ade80; }
.disk { color: #facc15; }

footer {
    margin-top: 50px;
    text-align: center;
    color: #94a3b8;
}
</style>
</head>

<body>

<header>ðŸš€ DockOps Hub â€“ Interactive Monitoring</header>

<div class="controls">
    <button class="start" onclick="startMonitoring()">Start</button>
    <button class="stop" onclick="stopMonitoring()">Stop</button>
    <button class="refresh" onclick="loadMetrics()">Refresh Now</button>
</div>

<div class="status" id="status">ðŸŸ¡ Monitoring stopped</div>

<div class="dashboard">
    <div class="card">
        <h2>CPU</h2>
        <div class="value cpu" id="cpu">--</div>
    </div>
    <div class="card">
        <h2>Memory</h2>
        <div class="value memory" id="memory">--</div>
    </div>
    <div class="card">
        <h2>Disk</h2>
        <div class="value disk" id="disk">--</div>
    </div>
</div>

<footer>
    Java â€¢ Tomcat â€¢ Docker â€¢ Linux
</footer>

<script>
let timer = null;

async function loadMetrics() {
    try {
        const res = await fetch("http://localhost:8080/hello/metrics");
        const data = await res.json();

        document.getElementById("cpu").innerText = data.cpu + "%";
        document.getElementById("memory").innerText = data.memory + "%";
        document.getElementById("disk").innerText = data.disk;

        document.getElementById("status").innerText = "ðŸŸ¢ Connected to backend";
    } catch (e) {
        document.getElementById("status").innerText = "ðŸ”´ Backend not reachable";
    }
}

function startMonitoring() {
    if (!timer) {
        loadMetrics();
        timer = setInterval(loadMetrics, 2000);
        document.getElementById("status").innerText = "ðŸŸ¢ Monitoring started";
    }
}

function stopMonitoring() {
    clearInterval(timer);
    timer = null;
    document.getElementById("status").innerText = "ðŸŸ¡ Monitoring stopped";
}
</script>

</body>
</html>
